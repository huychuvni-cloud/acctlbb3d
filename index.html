<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thông tin Tài khoản - Quản lý Trực quan</title>
    <!-- Tải Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Cấu hình Font và Tailwind -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto bg-white shadow-xl rounded-xl p-4 md:p-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 border-b-2 pb-2">Quản Lý Thông Tin Nhân Vật</h1>
        <p class="text-sm text-gray-500 mb-6">Nhấn vào nút sao chép để dễ dàng lấy ID và Mật khẩu.</p>
        
        <!-- Khu vực hiển thị bảng -->
        <div id="account-table-container" class="overflow-x-auto rounded-lg shadow-md">
            <!-- Bảng sẽ được render tại đây bằng JavaScript -->
        </div>

        <!-- Thông báo Copy Thành công -->
        <div id="copy-notification" class="fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg opacity-0 transition-opacity duration-300 ease-in-out pointer-events-none">
            Đã sao chép thành công!
        </div>
    </div>

    <script>
        // Dữ liệu tài khoản được trích xuất từ file CSV/Excel của bạn
        const accountData = [
            { id: 't26113', pass: '123456aa', name: 'zNgũYên', faction: 'NgaMy' },
            { id: 't26115', pass: '123456aa', name: 'zVôKỵ', faction: 'MinhGiáo' },
            { id: 't26120', pass: '123456aa', name: 'zTiêuPhong', faction: 'CáiBang' },
            { id: 't26121', pass: '123456aa', name: 'TiêuLongNữ', faction: 'NgaMy' },
            { id: 'thienlong05', pass: '123456aa', name: 'ThanhLong', faction: 'CáiBang' },
            { id: 'thienlong06', pass: '123456aa', name: 'ThầnLong', faction: 'CáiBang' },
            { id: 'baolamka21', pass: 'baolamka2021', name: 'ZzCakezz', faction: 'Tiêu dao' },
            { id: 'ongtao1989', pass: 'ongtao1989', name: 'Tôn Mỹ Mỹ', faction: 'NM' },
            { id: 'botao1989', pass: 'botao1989', name: 'BốTao', faction: 'TT' },
            { id: 'vankhanh3', pass: '25251325', name: 'TiếuNạiHà', faction: 'Tlong' },
            { id: 'binhhang33', pass: 'congvan1', name: 'MeTao', faction: 'TD' },
            { id: 'binhhang44', pass: 'congvan1', name: 'MáTao', faction: 'NM' },
            { id: 'vankhanh', pass: '123456', name: 'ThiênVũ', faction: 'VD' },
            { id: 'vankhanh4', pass: '123123 (or 123456 check lại)', name: 'NữYTá', faction: 'NM' },
            { id: 'vankhanh5', pass: '123123', name: 'BácSĩGià', faction: 'NM' },
        ];

        const tableContainer = document.getElementById('account-table-container');
        const notification = document.getElementById('copy-notification');

        /**
         * Hiển thị thông báo sao chép thành công.
         */
        function showNotification() {
            notification.classList.remove('opacity-0');
            notification.classList.add('opacity-100');
            setTimeout(() => {
                notification.classList.remove('opacity-100');
                notification.classList.add('opacity-0');
            }, 2000);
        }

        /**
         * Sao chép nội dung vào clipboard và hiển thị thông báo.
         * Dùng document.execCommand('copy') để đảm bảo hoạt động trong iframe.
         * @param {string} text - Nội dung cần sao chép.
         */
        function copyToClipboard(text) {
            // Tạo một textarea ẩn
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed'; // Vị trí cố định để không ảnh hưởng đến scroll
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            
            // Chọn và sao chép nội dung
            textarea.select();
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showNotification();
                } else {
                    console.error('Sao chép thất bại (execCommand).');
                    alert('Sao chép thất bại. Vui lòng thử lại.'); // Dùng alert tạm thời cho trường hợp lỗi
                }
            } catch (err) {
                console.error('Không thể thực hiện sao chép:', err);
                alert('Không thể thực hiện sao chép. Trình duyệt không hỗ trợ.');
            }
            
            // Xóa textarea khỏi DOM
            document.body.removeChild(textarea);
        }

        /**
         * Render bảng dữ liệu.
         */
        function renderTable() {
            let html = `
                <table class="min-w-full divide-y divide-gray-200">
                    <!-- Header Bảng -->
                    <thead class="bg-gray-100">
                        <tr>
                            <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">STT</th>
                            <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tên NV</th>
                            <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Phái</th>
                            <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID (Tài khoản)</th>
                            <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mật khẩu (PASS)</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
            `;

            accountData.forEach((item, index) => {
                const stt = index + 1;
                html += `
                    <tr class="hover:bg-gray-50 transition duration-150">
                        <!-- STT -->
                        <td class="px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${stt}</td>
                        <!-- Tên NV -->
                        <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-700">${item.name}</td>
                        <!-- Phái -->
                        <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-700">${item.faction}</td>
                        
                        <!-- ID + Nút Copy -->
                        <td class="px-3 py-4 whitespace-nowrap">
                            <div class="flex items-center space-x-2">
                                <span class="text-sm font-mono text-indigo-700 select-all" id="id-${stt}">${item.id}</span>
                                <button onclick="copyToClipboard('${item.id.replace(/'/g, "\\'")}')" 
                                        class="p-1 bg-indigo-100 text-indigo-600 rounded-full hover:bg-indigo-200 transition duration-150 transform hover:scale-105"
                                        title="Sao chép ID">
                                    <!-- Icon Copy SVG -->
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v2M6 8h10M6 15h10"/>
                                    </svg>
                                </button>
                            </div>
                        </td>
                        
                        <!-- Mật khẩu + Nút Copy -->
                        <td class="px-3 py-4 whitespace-nowrap">
                            <div class="flex items-center space-x-2">
                                <span class="text-sm font-mono text-red-600 select-all" id="pass-${stt}">${item.pass}</span>
                                <button onclick="copyToClipboard('${item.pass.replace(/'/g, "\\'")}')" 
                                        class="p-1 bg-red-100 text-red-600 rounded-full hover:bg-red-200 transition duration-150 transform hover:scale-105"
                                        title="Sao chép Mật khẩu">
                                    <!-- Icon Copy SVG -->
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v2M6 8h10M6 15h10"/>
                                    </svg>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            });

            html += `
                    </tbody>
                </table>
            `;

            tableContainer.innerHTML = html;
        }

        // Khởi tạo bảng khi trang tải xong
        window.onload = renderTable;
    </script>
</body>
</html>
